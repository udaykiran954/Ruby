# Ruby on Rails Internship – Day-wise Learning Notes

# Day1
First Day at DaySpring Technologies as intern -> completed all installations (Ruby, Rails) and compiled my first program.

## Ruby
- Everything in ruby is object (method also acts a object)
- Follow SOLID principals where I is silent
- very simple and readable

## Rails
- rails is framework of ruby we used to build dynamic application
- Rails is a MVC architecture

### Commands
- to check ruby version -> ruby -v
- For rails installation -> gem install rails
- to create rails application -> rails new ApplicationName
- to run the server -> rails s
- to change port number -> rails s -p portnumber

---

# Day2
Second Day at Dayspring Technologies as intern

- to create a rails application with database -> rails new applicatoname -d databasetype
- skip command, js command uses as extension in rails new command
- we can add through rails new command

### Rails Console
- rails console
- rails c

### Database Commands
- rails db:create
- rails db:seed (to see)
- rails db:migrate (used in production we get exception if we can't use this command)

### Scaffold
rails generate scaffold Customer name:string email:string

---

# Day3

- Syntactic sugar
- Convention over configuration

### Rails Flow
end point  
|  
controller methods actions  
|       |       |
|     model------ 
|  
view  

- routes.rb -> we will define end points used for navigation if delete application won't run
- bin -> not modifiable autogenerated if we delete application won't run

config -> all the things required for a application  
|       |       |  
|   environment -> replicate and to test this files are extendable modifiable customizable  
|               |  
initializers    |  
                |  
                locales -> extendable  

Other files:
- rake
- boot.rb
- application.rb

---

# Day4

- secrets.rb -> we put secured data
- creditinal.yml used for different environment
- database.yml designed for sql databases
- deploy.yml instructions we can give for deployment
- environment.rb if we delete this application will not run
- importmap.rb released after rails 7
- puma.rb default server

### Routing
- member route
- collection route
- nested route

---

# Day5 (Ruby)

## Variables
There are 5 types of Variables

1. global Variables  
   $college_name = "IIIT"

2. class Variables  
   @@count = 0

3. instance Variables  
   @name = "uday"

4. local Variables  
   a = 10

5. constant Variables  
   PI = 3.14

## Datatypes
ruby is dynamically typed language we don't need to mention datatypes

Examples:
a = 10  
b = 19.10  
c = "uday"  
d = :uday  
flag = true  

Datatypes:
- Integer
- String
- Symbol
- boolean / nil

## String
- String is mutable in ruby  
  name = "uday"

## Symbol
- Symbol is immmutable  
  name = :uday

## Note
We can check which datatype of a variable using class method

a = 10  
a.class -> Integer  

a = :uday  
a.class -> symbol  

b = "uday"  
b.class -> string  

## Input from User
In ruby we can take the input from the user by the gets.chomp method
```ruby
a = gets.chomp  
puts a  
```
## TypeConversion
a = "10"  
b = a.to_i  

- to_i -> Integer
- to_s -> String
- to_f -> Float

---

# Day6 (Ruby)

## Loops

### for
```ruby
for i in 1..10  
  puts i  
end  
```
### while
```ruby
i = 1  
while i <= 5  
  puts "hi"  
  i += 1  
end  
```
### loop
```ruby
m = 1  
loop do  
  puts "hello"  
  break if m == 5  
  m += 1  
end  
```
### until
```ruby
j = 0  
until j > 5  
  puts j  
  j = j + 1  
end  
```
### break
```ruby
i = 7  
loop do  
  puts "hello"  
  break if i == 10  
  i += 1  
end  
```
### next
```ruby
for k in 1..5  
  next if k % 2 == 0  
  puts k  
end  
```
### redo
```ruby
flag = true  
for x in 2..4  
  puts x  
  if x == 2 && flag == true  
    flag = false  
    redo  
  end  
end  
```
## Array Methods

### select
```ruby
arr = [1,2,3,4,5,6,7]  
arr2 = arr.select { |i| i % 2 == 0 }  
```
### each
```ruby
arr2.each do |i|  
  puts i  
end  
```
### reject
```ruby
arr.reject { |i| i % 2 == 0 }  
```
### all?
```ruby
arr.all? { |n| n >= 5 }  
```
### any?
```ruby
arr.any? { |n| n >= 5 }  
```
### map
```ruby
num = [1,2,3,4,5,6]  
num2 = num.map { |m| m * 2 }  
```
### each
```ruby
num.each { |i| i * 2 }  
```
### collect
```ruby
num3 = num.collect { |i| i * 3 }  
```
Note:! modifies original array
```ruby
arr.map! {|n| n+=5}
print arr
```
---

# Day7 (Ruby)

## Inheritance
- only single level Inheritance is possible in ruby
- we can represent Inheritance by using < symbol
```bash
class Base  
end  

class Child < Base  
end  
```
## super
super keyword look up to the ancestors for a method until a method found

## Object Hierachy
Child  
|  
Base  
|  
Object  
|  
Kernel  
|  
BasicObject  

### Example
```ruby
class Base  
  def welcome  
    "welcoming you from base class"  
  end  
end  

class Child < Base  
  def welcome  
    super  
    "welocming you from child class"  
  end  
end  
```
obj = Child.new  
puts obj.welcome  

### ancestors
```ruby
Child.ancestors  
```
### respond_to?
```ruby
obj.respond_to?(:methodname)  
```
---

# Day8 (Ruby)

## Conditional Statment

### if / else
```ruby
stock = 20  
is_available = false  

if stock > 0  
  is_available = true  
else  
  puts "Item not available"  
end  

puts is_available
```  

### Ternary
```ruby
is_active = true  
a = (is_active) ? "present" : "not present"  
puts a  
```

### elsif
```ruby
price = 500  
discount = 0  

if price >= 100 && price < 200  
  discount = 10  
elsif price >= 200 && price < 300  
  discount = 20  
elsif price >= 300 && price < 400  
  discount = 30  
elsif price >= 400 && price < 500  
  discount = 40  
elsif price >= 500 && price < 600  
  discount = 50  
else  
  discount = 5  
end  

puts discount  
```
### case
```ruby
case  
when 100..200  
  discount = 10  
when 201..300  
  discount = 20  
when 301..400  
  discount = 30  
when 401..500  
  discount = 40  
when 500..600  
  discount = 50  
else  
  discount = 5  
end  

puts discount  
```

### unless
```ruby
email = true  
unless email  
  puts "email unavailable"  
else  
  puts "email available"  
end  
```

## Methods
- public
- private
- protected

---

# Day9 (Rails)

## Rails Validations

Validations can be done in 2 ways  
1. through UI  
2. through Model  

Through UI triggered at the time of entering the fields  
Through Model triggered at the time of submitting  

### Model Validations
```ruby
validates :name, format: { with: /\A[a-zA-Z]+\z/, message: "Only letters are allowed" }  
validates :stock, numericality: { greater_than_or_equal_to: 10 }  
validates :price, numericality: { greater_than_or_equal_to: 100 }  
validates :description, length: { maximum: 500 }  
```

### Custom Validation
```ruby
validate :check_price  
def check_price  
  if stock == 0 && price > 0  
    errors.add "this is not allowed"  
  end  
end  
```

---

# Day10
## Scope
- used for repeated query
- method chaining

- ex:-
```ruby
  scope :out_of_stock, -> {where("stock <= ?", 0)}
  scope :test_scope, -> query{} #we can write the raw sql query
  scope :out_of_stock, -> { where(stock: 0)}
  scope :whitelisted_products,  -> { where("id IN (?)", [1, 2, 3]) }

  scope :unique_emails, -> {where(email: "124@gmail.com").select(:email).distinct}
  scope :blacklisted_customers, ->(customer_ids) { where(id: customer_ids) } 
```

 # Day12

## Generating controller
```bash
rails generate controller admins
```
- above command generate following files
- app\controllers\admins_controller.rb-->controller file

- app\views\admins->views admin file

- app/helpers/admin_helper.rb → helper file

- test/controllers/admin_controller_test.rb → controller test file

# Generating a Model
```bash
rails generate model admin
```
- Rails creates files related to database and business logic: This comes under Active Record.

- app/models/admin.rb → model file
- db/migrate/XXXXXXXX_create_admins.rb → migration file
- test/models/admin_test.rb → model test file
- test/fixtures/admins.yml → test data

# Deleting view Page

- If we delete the show.html.erb file and access the show page, will get this error:
```bash
ActionController::UnknownFormat in CustomersController#show
CustomersController#show is missing a template for this request format.
```
- Reason: if we request show page it will trigger to corresponding UI page(show.html.erb)when it is not found shows above error 

# Removing Controller method
- If we remove from the controller method (ex:``` def show end```), there is no error in Rails version 8.
- Reason:
1. Rails 8 handles missing actions
2. If the route or action is not used, it does not crash the app
# Changes in routes.rb
```ruby
1. resources :products, except: [:show,:new]
2. resources :products, only: [:new, :destroy]
```
- if we use except for routes, it will not allow you to request the mentioned routes ,if we try to use them it will throw ``` routing error```

- if we use only for routes, it will allow you only to request mentioned routes,if we request other routes it will also throw ``` routing error```

# action components 
- action components is one of the feature of rails this components will help us in many examples

## Rails Components

| Name              | Feature Area                | Description                                                                 | Introduced |
|-------------------|-----------------------------|-----------------------------------------------------------------------------|------------|
| Active Model      | Model functionality         | Adds validations, callbacks, naming, and conversion features to plain Ruby objects | Rails 3.0 |
| Active Record     | Database interaction (ORM)  | Maps Ruby objects to database tables and provides CRUD operations            | Rails 1.0 |
| Action View       | View layer                  | Renders HTML using templates such as ERB, HAML, and partials                 | Rails 1.0 |
| Action Controller | Controller layer            | Processes incoming requests, handles responses, and coordinates models and views | Rails 1.0 |
| Active Job        | Background processing       | Provides a unified interface for running background jobs with different queue adapters | Rails 4.2 |
| Active Support    | Core extensions & utilities | Extends Ruby with helpful utility methods and framework support features     | Rails 1.0 |
| Action Mailer     | Email services              | Enables sending and receiving emails using mailer classes                    | Rails 1.0 |
| Action Mailbox    | Incoming email processing   | Routes incoming emails to controllers for application-level processing       | Rails 6.0 |
| Action Cable      | Real-time communication     | Enables WebSocket-based features like live chat and notifications            | Rails 5.0 |
| Active Storage    | File management             | Handles file uploads, storage, and attachments using cloud or local services | Rails 5.2 |
| Action Text       | Rich text handling          | Supports rich text content with embedded images using a built-in editor      | Rails 6.0 |
| Action Dispatch   | Routing & middleware stack  | Manages request routing, sessions, cookies, and middleware integration       | Rails 1.0 |


# Day13
## Adding the column to a table in rails application
```ruby
rails generate migration AddColumnColnameToTablename colname:datatype
rails generate migration AddColumnPhone_numberToCustomer phone_number:integer
rails db:migrate
```
- it will add below file to your db/migrate folder when you run above commands 
1. db/migrate/20260128044536_add_column_phone_to_customer.rb

## installing action-text in our application
```ruby
rails action_text:install
rails db:migrate
```
- it will add the below 4 tables in Schema.rb file 
1. action_text_rich_texts
2. active_storage_attachments
3. active_storage_blobs
4. active_storage_variant_records

- it will add below 2 files in db/migrate folder 
1. db/migrate/20260128045359_create_active_storage_tables.active_storage.rb
2. db/migrate/20260128045360_create_action_text_tables.action_text.rb

-it will add below file to app\assets\stylesheets
1. app\assets\stylesheets\actiontext.css

-it will add below folder to app/views
1. app/views/active_storage/blobs/_blob.html.erb

- it will add below folder to app/views/layouts
1. app/views/layouts/action_text/contents/_content.html.erb

- it will add below folder to app/views/test/fixtures
1. test/fixtures/action_text/rich_texts.yml

- command to check files we are modified in folder
 ```bash
 git status
 ```
 - command to check files we are modified in particular file
 ```bash
 git diff applicationpath
 ```
# Task1 
- After installing the action-text it will modify the schema.rb file by adding 4 tables mentioned above 
- by defaultly there is a connection between "active_storage_attachments", and "active_storage_blobs"(adds the foreinkey as blob_id in "active_storage_attachments" which refers the id of "active_storage_blobs")
- by defaultly there is a connection between "active_storage_variant_records", and "active_storage_blobs"(adds the foreinkey as blob_id in "active_storage_variant_records" which refers the id of "active_storage_blobs")

# Task2
```ruby
a1 = [1,2,3,4,5,6]
a2 = [1,3,5]
a3 = a1 & a2 # it will give all common elements(intersect)
a4 = a1 || a2 # it will give all elemnts(union)
print a3 #[1, 3, 5] 
puts 
print a4 #[1, 2, 3, 4, 5, 6]
```
# Task3
## params.inspect
- params.inspect is usually used for debugging—to see what parameters are actually coming from the form/request.
- This will
1. Stop execution
2. Show all permitted params in the error page
```ruby
 def create
    raise customer_params.inspect
    @customer = Customer.new(customer_params)
    respond_to do |format|
      if @customer.save
        format.html { redirect_to @customer, notice: "Customer was successfully created." }
        format.json { render :show, status: :created, location: @customer }
      else
        format.html { render :new, status: :unprocessable_entity }
        format.json { render json: @customer.errors, status: :unprocessable_entity }
      end
    end
  end
```
- It giving ``` #<ActionController::Parameters {"name" => "jhon", "email" => "1@gmail.com", "about_me" => "<div>jhon is a english name</div>"} permitted: true> ```






